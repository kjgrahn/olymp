#!/usr/bin/env python
# -*- coding: iso-8859-1 -*-
#
# $Id: olymp,v 1.11 2006-02-05 17:14:12 grahn Exp $
#
# Copyright (c) 2002--2006 Jörgen Grahn
# All rights reserved.
#
"""enumerate and/or rename Olympus digital camera photos
"""
import os

def olymp(files, output, rename=0):
    """Investigate 'files', a sequence of file names, and print a
    better name, and date/time stamp, to file-like object 'output'.

    If 'rename' is set, also try to rename them accordingly.

    Whines to stderr if something goes wrong, and also returns false.
    """

if __name__ == "__main__":
    import getopt
    import sys

    prog = os.path.split(sys.argv[0])[1]
    usage = 'usage: %s [-e] file ...' % prog
    try:
        rename = 0
        opts, files = getopt.getopt(sys.argv[1:], 'e')
        for opt, val in opts:
            if opt=='-e':
                rename = 1
        if not len(files)==1:
            raise ValueError, 'arguments missing'
    except (ValueError, getopt.GetoptError), s:
        print >>sys.stderr, 'error:', s
        print >>sys.stderr, usage
        sys.exit(1)

    rc = olymp(sys.stdout, rename, files)
    if not rc:
        sys.exit(1)
    sys.exit(0)
